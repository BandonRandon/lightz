var seeedAccessToken="YOUR_SEEED_ACCESS_TOKEN";var seeedAPIServer="https://us.wio.seeed.io/v1/node/GroveRelay";function relayClick(e,a,c,b){var a=(a=="on")?1:0;var d=seeedAPIServer+e+"/onoff/"+a+"?access_token="+c;$.ajax({type:"POST",url:d,success:(function(f){if(f.result=="ok"){ajaxSuccess(b)}}),error:(function(){ajaxFailed()}),complete:(function(f){if(f.result=="ok"){ajaxSuccess(b)}}),})}function relayStatus(d,c){var b=seeedAPIServer+d+"/onoff_status?access_token="+c;var a="";$.ajax({type:"GET",url:b,async:false,success:(function(e){a=e.onoff}),error:(function(e){parseData=jQuery.parseJSON(e.responseText);a=parseData.error;if(a=="Node is offline"){ajaxOffline()}else{ajaxFailed()}}),});return a}function checkRelayStatus(a){if(relayStatus("D0",a)==1){$(".status").addClass("bulb-on").removeClass("bulb-off");$("#action-button").html("Turn Light Off").removeClass("disabled").removeClass("bulb-disabled")}else{if(relayStatus("D0",a)=="Node is offline"){$(".status").addClass("bulb-disabled").removeClass("bulb-off").removeClass("bulb-on");$("#action-button").html("Device Offline. Click To Reconnect.").addClass("disabled")}else{$(".status").addClass("bulb-off").removeClass("bulb-on").removeClass("bulb-disabled");$("#action-button").html("Turn Light On").removeClass("disabled")}}}function ajaxFailed(){$(".result").stop().fadeIn().html("Error Occured, Please Try Again.").removeClass().addClass("result fail").delay(3000).fadeOut(2000)}function ajaxOffline(){$(".result").stop().fadeIn().html("Check outlets power and WiFi connection before trying to reconnect.").removeClass().addClass("result fail").delay(3000).fadeOut(2000)}function ajaxSuccess(){$(".result").hide()}$(document).ready(function(){$(".result").hide();$(".reconnect").hide();checkRelayStatus(seeedAccessToken);$("body").on("click","#action-button",function(a){if($(".status").hasClass("bulb-on")){relayClick("D0","off",seeedAccessToken,"Turning Lamp Off");$("#action-button").html("Turn Light On");$(".status").addClass("bulb-off").removeClass("bulb-on").removeClass("bulb-disabled")}else{if($(".status").hasClass("bulb-disabled")){a.preventDefault();checkRelayStatus(seeedAccessToken)}else{relayClick("D0","on",seeedAccessToken,"Turning Lamp On");$("#action-button").html("Turn Light Off");$(".status").addClass("bulb-on").removeClass("bulb-off").removeClass("bulb-disabled")}}return false})});